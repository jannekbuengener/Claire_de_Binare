# Claire de Binare - Environment Configuration Example
# Copy this file to .env and fill in your actual values

# =============================================================================
# TRADING MODE CONFIGURATION
# =============================================================================

# Paper Trading vs Live Trading
# MOCK_TRADING=true: Uses MockExecutor (simulated trades, no real money)
# MOCK_TRADING=false: Uses LiveExecutor (connects to real exchange)
MOCK_TRADING=true

# Live Trading Safety Switch (only applies when MOCK_TRADING=false)
# MUST be explicitly set to "true" to execute real trades
# Default: false (dry_run mode - uses real prices but doesn't execute)
LIVE_TRADING_ENABLED=false

# Live Balance Provider (read-only balance queries)
# USE_LIVE_BALANCE=true: Fetches real balances from exchange for risk calculations
# USE_LIVE_BALANCE=false: Uses TEST_BALANCE fallback
USE_LIVE_BALANCE=false

# Fallback balance for testing/paper trading (in USDT)
TEST_BALANCE=10000

# =============================================================================
# MEXC EXCHANGE API CREDENTIALS
# =============================================================================

# Get your API keys from: https://www.mexc.com/user/openapi
# IMPORTANT: Never commit real API keys to version control!
MEXC_API_KEY=your_api_key_here
MEXC_API_SECRET=your_api_secret_here

# MEXC Testnet (MEXC doesn't have a testnet, use with caution)
MEXC_TESTNET=false

# MEXC API Base URL
MEXC_BASE_URL=https://api.mexc.com

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

REDIS_HOST=cdb_redis
REDIS_PORT=6379
REDIS_DB=0
# REDIS_PASSWORD is loaded from .secrets/redis_password file

# =============================================================================
# POSTGRESQL CONFIGURATION
# =============================================================================

POSTGRES_HOST=cdb_postgres
POSTGRES_PORT=5432
POSTGRES_USER=claire_user
POSTGRES_DB=claire_de_binare
# POSTGRES_PASSWORD is loaded from .secrets/postgres_password file

# =============================================================================
# RISK MANAGEMENT LIMITS (Enhanced - Issue #177)
# =============================================================================

# Percentage-Based Limits
# -----------------------
# Maximum position size as percentage of total balance (0.10 = 10%)
MAX_POSITION_PCT=0.10

# Maximum total exposure as percentage of total balance (0.30 = 30%)
MAX_TOTAL_EXPOSURE_PCT=0.30

# Maximum daily drawdown before circuit breaker activates (0.05 = 5%)
MAX_DAILY_DRAWDOWN_PCT=0.05

# Stop loss percentage (0.02 = 2%)
STOP_LOSS_PCT=0.02

# Position Count Limits
# ---------------------
# Maximum number of simultaneous open positions (default: 5)
MAX_OPEN_POSITIONS=5

# Maximum positions per symbol (prevents duplicate entries, default: 1)
MAX_POSITIONS_PER_SYMBOL=1

# Per-Symbol Absolute Limits (Optional)
# -------------------------------------
# JSON format: {"SYMBOL": max_quantity}
# Example: {"BTCUSDT": 0.5, "ETHUSDT": 10.0, "SOLUSDT": 100.0}
PER_SYMBOL_LIMITS={}

# Emergency Controls
# ------------------
# Enable emergency stop check (default: true)
ENABLE_EMERGENCY_STOP=true

# To activate emergency stop (halt ALL trading):
#   redis-cli SET "trading:emergency_stop" "1"
# To deactivate:
#   redis-cli DEL "trading:emergency_stop"

# Circuit Breaker Settings
# -------------------------
# Cooldown period in minutes after circuit breaker triggers (default: 60)
CIRCUIT_BREAKER_COOLDOWN=60

# Auto-reset circuit breaker after cooldown? (default: false)
# false = manual reset required, true = auto-reset
CIRCUIT_BREAKER_AUTO_RESET=false

# =============================================================================
# SERVICE PORTS
# =============================================================================

SIGNAL_PORT=8001
RISK_PORT=8002
EXECUTION_PORT=8003
MARKET_PORT=8004

# =============================================================================
# LOGGING
# =============================================================================

LOG_LEVEL=INFO
ENV=development

# =============================================================================
# SAFETY CHECKLIST BEFORE ENABLING LIVE TRADING
# =============================================================================

# ⚠️ BEFORE setting LIVE_TRADING_ENABLED=true, ensure:
#
# [ ] Paper trading runs successfully for 72 hours minimum
# [ ] All risk limits tested and working correctly
# [ ] Circuit breakers tested and trigger properly
# [ ] API credentials are valid and have correct permissions
# [ ] Starting with SMALL amounts (max $100-500 for initial live test)
# [ ] Monitoring and alerting systems in place
# [ ] Emergency stop procedures documented and tested
# [ ] Backup plan ready if something goes wrong
# [ ] You understand this is REAL MONEY and can result in REAL LOSSES
#
# RECOMMENDED PROGRESSION:
# 1. MOCK_TRADING=true, USE_LIVE_BALANCE=false (pure simulation)
# 2. MOCK_TRADING=false, LIVE_TRADING_ENABLED=false, USE_LIVE_BALANCE=true (dry run with real data)
# 3. MOCK_TRADING=false, LIVE_TRADING_ENABLED=true (live trading with small amounts)
