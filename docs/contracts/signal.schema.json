{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Trading Signal Message Contract",
  "$comment": "Migration: direction -> side; legacy direction rejected.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "schema_version",
    "signal_id",
    "strategy_id",
    "symbol",
    "side",
    "timestamp"
  ],
  "properties": {
    "schema_version": {"const": "v1.0", "type": "string"},
    "type": {"const": "signal", "type": "string"},
    "signal_id": {"type": "string"},
    "strategy_id": {"type": "string"},
    "bot_id": {"type": "string"},
    "symbol": {"type": "string"},
    "side": {"type": "string", "enum": ["BUY", "SELL"]},
    "timestamp": {"type": "integer"},
    "strength": {"type": "number", "minimum": 0.0, "maximum": 1.0},
    "confidence": {"type": "number", "minimum": 0.0, "maximum": 1.0},
    "price": {"type": "number"},
    "reason": {"type": "string"},
    "pct_change": {"type": "number"}
  }
}
